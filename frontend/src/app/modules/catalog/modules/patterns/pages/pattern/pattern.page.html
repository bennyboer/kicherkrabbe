<h1>Basic Sweater der Fünfte</h1>

<div *ngIf="pattern$ | async as pattern" class="layout">
  <div class="images desktop">
    <ul>
      @for (image of pattern.images; track image.url) {
        <li><img [src]="image.url"></li>
      }
    </ul>
  </div>
  <div class="images mobile">
    <ul>
      <li><img [src]="pattern.images[0].url"></li>
    </ul>
  </div>
  <div class="details">
    <app-price-tag class="price">ab {{ pattern.getStartingPrice().formatted() }}</app-price-tag>

    @for (variant of pattern.variants; track variant.id) {
      <h2>{{ variant.name }}</h2>

      @if (variant.description.isSome()) {
        <p>{{ variant.description }}</p>
      }

      <table class="price-table">
        <thead>
        <tr>
          <th>Größe</th>
          <th>Preis</th>
        </tr>
        </thead>
        <tbody>
          @for (sizeRange of variant.sizes; track sizeRange) {
            <tr>
              <td>{{ sizeRange.formatted() }}</td>
              <td>{{ sizeRange.price.formatted() }}</td>
            </tr>
          }
      </table>
    }

    @if (pattern.extras.length > 0) {
      <h2>Extras</h2>

      <p>
        @for (extra of pattern.extras; track extra) {
          + {{ extra.price.formatted() }} € für {{ extra.name }}<br>
        }
      </p>
    }
  </div>
  <div class="images mobile">
    <ul>
      @for (image of pattern.images.slice(1); track image.url) {
        <li><img [src]="image.url"></li>
      }
    </ul>
  </div>
</div>

